<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="voltar()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Relatório do serviço</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="assinatura()" *ngIf="!levantamento">
        <ion-icon name="arrow-forward"></ion-icon>
      </ion-button>
      <ion-button (click)="detalhesTecnicos()" *ngIf="levantamento">
        <ion-icon name="arrow-forward"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <ion-list>
    <ion-item>
      <ion-label> Cliente:&nbsp;{{ ordemDetalhes?.nomeCliente }} </ion-label>
    </ion-item>
  </ion-list>

  <ion-list>
    <ion-item-group>
      <ion-list-header>
        <ion-label> Áreas </ion-label>
      </ion-list-header>
      <ion-item *ngFor="let area of areasCompletas">
        <ion-label>
          <h4>{{ area?.nome }}</h4>
          <p>Pragas:</p>
          <p *ngFor="let praga of pragasByArea" text-wrap>
            <span *ngIf="praga.idArea == area.id">-&nbsp;{{ praga?.nome }}:
              &nbsp;{{getInfestacao(praga?.nivel)}}</span>
          </p>
          <p>Dispositivos:</p>
          <p *ngFor="let dispositivo of dispositivos" text-wrap>
            <span *ngIf="dispositivo.id_area == area.idArea">-&nbsp;N° {{ dispositivo.sequencia }} - {{ dispositivo.tipo }}:
              &nbsp;{{dispositivo.pragas}}</span>
          </p>
        </ion-label>
      </ion-item>
    </ion-item-group>

    <ion-item-group margin-top>
      <ion-list-header *ngIf="!levantamento">
        <ion-label> Produtos </ion-label>
      </ion-list-header>
      <ion-item *ngFor="let prod of ordemProdutos">
        <ion-label>
          <h4>{{ prod?.produto }}:&nbsp;{{ prod?.qtd }}</h4>
        </ion-label>
      </ion-item>
      <ion-list-header>
        <ion-label> Módulos </ion-label>
      </ion-list-header>
      <ion-item *ngFor="let prod of ordemModulos">
        <ion-label>
          <h4>&nbsp;{{ prod?.produto }}:&nbsp;{{ prod?.qtd }}</h4>
        </ion-label>
      </ion-item>
    </ion-item-group>
  </ion-list>
</ion-content>