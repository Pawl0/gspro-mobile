<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="voltar()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Áreas (OS {{ordemDetalhes?.id}})</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding-top>

  <ion-list lines="full">

    <ion-item>
      <ion-col>
        <ion-list-header>
          <ion-label>Progresso da OS</ion-label>
        </ion-list-header>
        <ion-progress-bar [value]="valorBarra" [color]="corBarra" type="determinate" margin-bottom></ion-progress-bar>
        <ion-button color="medium" expand="block" (click)="abrirSelect()">Adicionar área</ion-button>
        <ion-button color="success" expand="block" (click)="inserirQtd()" *ngIf="!levantamento" margin-top
          [disabled]="salvarAreas">Quantidade
          de produtos</ion-button>
        <ion-button color="success" expand="block" (click)="relatorio()" *ngIf="levantamento" margin-top
          [disabled]="salvarAreas">Relatório</ion-button>
      </ion-col>
    </ion-item>

    <ionic-selectable #select [items]="areasPre" itemValueField="id" itemTextField="nome" [canSearch]="true"
      closeButtonText="Cancelar" searchFailText="'Nenhua área encontrada'" searchPlaceholder="Buscar nome"
      (onChange)="adicionarArea($event)" [hasVirtualScroll]="true" hidden></ionic-selectable>

    <ion-item-group *ngIf="mostrarCompletas">
      <ion-item-divider>
      </ion-item-divider>

      <ion-item-sliding *ngFor="let item of areasCompletas">
        <ion-item (click)="acessarDetalheArea(item?.id, item?.nome, item?.idArea)" detail tappable>
          <ion-label><strong>
              <ion-text color="success">{{item?.nome}}</ion-text>
            </strong></ion-label>
        </ion-item>
        <ion-item-options side="start">
          <ion-item-option color="{{getDeleteAreaOptionColor(item)}}" (click)="removerAreaAguardando(item)">
            <ion-icon name="alert"></ion-icon>&nbsp;{{getDeleteAreaOptionLabel(item)}}
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-item-group>

    <ion-item-group *ngIf="mostrarAguardando">
      <!-- <ion-item-divider *ngIf="mostrarAguardando">
      </ion-item-divider> -->

      <ion-item-sliding *ngFor="let item of areaLista">
        <ion-item (click)="acessarDetalheArea(item?.id, item?.nome,item?.idArea)" detail tappable>
          <ion-label><strong>
              <ion-text color="medium">{{item?.nome}}</ion-text>
            </strong></ion-label>
        </ion-item>
        <ion-item-options side="start">
          <ion-item-option color="{{getDeleteAreaOptionColor(item)}}" (click)="removerAreaAguardando(item)">
            <ion-icon name="alert"></ion-icon>&nbsp;{{getDeleteAreaOptionLabel(item)}}
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-item-group>

  </ion-list>

</ion-content>